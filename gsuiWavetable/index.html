<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1"/>
<link rel="shortcut icon" href="../assets/favicon.png"/>
<link rel="stylesheet" href="../assets/fonts/fonts.css"/>

<!-- ....................................................................... -->
<link rel="stylesheet" href="../gsui.css"/>
<link rel="stylesheet" href="../gsuiIcon/gsuiIcon.css"/>
<link rel="stylesheet" href="../test-assets/test.css"/>

<!-- ....................................................................... -->
<link rel="stylesheet" href="../gsuiHelpLink/gsuiHelpLink.css"/>
<link rel="stylesheet" href="../gsuiDropdown/gsuiDropdown.css"/>
<link rel="stylesheet" href="../gsuiActionMenu/gsuiActionMenu.css"/>
<link rel="stylesheet" href="../gsuiBeatlines/gsuiBeatlines.css"/>
<link rel="stylesheet" href="../gsuiDotline/gsuiDotline.css"/>
<link rel="stylesheet" href="../gsuiSlider/gsuiSlider.css"/>
<link rel="stylesheet" href="../gsuiReorder/gsuiReorder.css"/>
<link rel="stylesheet" href="../gsuiWavetableGraph/gsuiWavetableGraph.css"/>

<!-- ....................................................................... -->
<link rel="stylesheet" href="gsuiWavetable.css"/>

<!-- ....................................................................... -->
<style>
body {
	--test-content-w: 900px;
	--test-content-h: 500px;
}
</style>
</head>
<body>

<!-- ....................................................................... -->
<div id="TEST">
	<gsui-wavetable></gsui-wavetable>
</div>
<div id="TEST-CTRLS">
	<div data-wtposcurve="0">
		<code>wtposCurve[0]</code>
		<button data-key-dur=".25">.25</button>
		<button data-key-dur=".5">.5</button>
		<button data-key-dur="1">1</button>
		<button data-key-dur="2">2</button>
		<button data-key-dur="4">4</button>
		<button data-key-dur="8">8</button>
	</div>
	<div data-wtposcurve="1">
		<code>wtposCurve[1]</code>
		<button data-key-dur=".25">.25</button>
		<button data-key-dur=".5">.5</button>
		<button data-key-dur="1">1</button>
		<button data-key-dur="2">2</button>
		<button data-key-dur="4">4</button>
		<button data-key-dur="8">8</button>
	</div>
	<div data-wtposcurve="2">
		<code>wtposCurve[2]</code>
		<button data-key-dur=".25">.25</button>
		<button data-key-dur=".5">.5</button>
		<button data-key-dur="1">1</button>
		<button data-key-dur="2">2</button>
		<button data-key-dur="4">4</button>
		<button data-key-dur="8">8</button>
	</div>
</div>

<!-- ....................................................................... -->
<script src="../gs-utils/gs-utils.js"></script>
<script src="../gs-utils/gs-utils-dom.js"></script>
<script src="../gs-utils/gs-utils-math.js"></script>
<script src="../gs-utils/gs-utils-json.js"></script>
<script src="../gs-utils/gs-utils-models.js"></script>
<script src="../test-assets/test.js"></script>
<script src="../gsui0ne/gsui0ne.js"></script>

<!-- ....................................................................... -->
<script src="../gsuiHelpLink/gsuiHelpLink.js"></script>
<script src="../gsuiDropdown/getAbsPos.js"></script>
<script src="../gsuiDropdown/gsuiDropdown.js"></script>
<script src="../gsuiActionMenu/gsuiActionMenu.js"></script>
<script src="../gsuiBeatlines/gsuiBeatlines.html.js"></script>
<script src="../gsuiBeatlines/gsuiBeatlines.js"></script>
<script src="../gsuiDotlineSVG/gsuiDotlineSVG.html.js"></script>
<script src="../gsuiDotlineSVG/gsuiDotlineSVG.js"></script>
<script src="../gsuiDotline/gsuiDotline.html.js"></script>
<script src="../gsuiDotline/gsuiDotline.js"></script>
<script src="../gsuiSlider/gsuiSlider.html.js"></script>
<script src="../gsuiSlider/gsuiSlider.js"></script>
<script src="../gsuiReorder/gsuiReorder.js"></script>
<script src="../gsuiWavetableGraph/gsuiWavetableGraph.js"></script>

<!-- ....................................................................... -->
<script src="gsuiWavetable.html.js"></script>
<script src="gsuiWavetable.js"></script>

<!-- ....................................................................... -->
<script>
const elWT = document.querySelector( "gsui-wavetable" );
const elCtrls = document.querySelector( "#testCtrls" );
const bpm = 120;

elCtrls.onclick = e => {
	const dur = +e.target.dataset.keyDur;
	const cId = e.target.parentNode.dataset.wtposcurve;

	if ( dur ) {
		elWT.$startKey( "k0", cId, bpm, dur );
	}
};

elWT.$change( {
	waves: {
		0: {
			index: 0,
			curve: {
				0: { x: 0,   y:  0, type: null,          val:  null },
				2: { x: .25, y:  1, type: "curve",       val:  1 },
				3: { x: .75, y: -1, type: "doubleCurve", val:  1 },
				1: { x: 1,   y:  0, type: "curve",       val: -1 },
			},
		},
		1: {
			index: 1,
			curve: {
				0: { x: 0,   y:  0, type: null,    val: null },
				2: { x: .50, y:  1, type: "curve", val: 0 },
				3: { x: .51, y: -1, type: "curve", val: 0 },
				1: { x: 1,   y:  0, type: "curve", val: 0 },
			},
		},
	},
	// wtposCurves: {
	// 	0: {
	// 		duration: 1,
	// 		curve: {
	// 			0: { x:  0, y:  0, type: null, val: null },
	// 			1: { x:  1, y:  1, type: "curve", val: 0 },
	// 		},
	// 	},
	// },
} );
</script>
</body>
</html>
